// src/removable.ts
<<<<<<< HEAD
import { timeoutManager } from "./timeoutManager.js";
=======
>>>>>>> parent of 82e7c980 (trying to back back before dimentios)
import { isServer, isValidTimeout } from "./utils.js";
var Removable = class {
  #gcTimeout;
  destroy() {
    this.clearGcTimeout();
  }
  scheduleGc() {
    this.clearGcTimeout();
    if (isValidTimeout(this.gcTime)) {
<<<<<<< HEAD
      this.#gcTimeout = timeoutManager.setTimeout(() => {
=======
      this.#gcTimeout = setTimeout(() => {
>>>>>>> parent of 82e7c980 (trying to back back before dimentios)
        this.optionalRemove();
      }, this.gcTime);
    }
  }
  updateGcTime(newGcTime) {
    this.gcTime = Math.max(
      this.gcTime || 0,
      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)
    );
  }
  clearGcTimeout() {
    if (this.#gcTimeout) {
<<<<<<< HEAD
      timeoutManager.clearTimeout(this.#gcTimeout);
=======
      clearTimeout(this.#gcTimeout);
>>>>>>> parent of 82e7c980 (trying to back back before dimentios)
      this.#gcTimeout = void 0;
    }
  }
};
export {
  Removable
};
//# sourceMappingURL=removable.js.map