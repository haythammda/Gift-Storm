import {
  __privateAdd,
  __privateGet,
  __privateSet
<<<<<<< HEAD
} from "./chunk-PXG64RU4.js";

// src/removable.ts
import { timeoutManager } from "./timeoutManager.js";
=======
} from "./chunk-2HYBKCYP.js";

// src/removable.ts
>>>>>>> parent of 82e7c980 (trying to back back before dimentios)
import { isServer, isValidTimeout } from "./utils.js";
var _gcTimeout;
var Removable = class {
  constructor() {
<<<<<<< HEAD
    __privateAdd(this, _gcTimeout);
=======
    __privateAdd(this, _gcTimeout, void 0);
>>>>>>> parent of 82e7c980 (trying to back back before dimentios)
  }
  destroy() {
    this.clearGcTimeout();
  }
  scheduleGc() {
    this.clearGcTimeout();
    if (isValidTimeout(this.gcTime)) {
<<<<<<< HEAD
      __privateSet(this, _gcTimeout, timeoutManager.setTimeout(() => {
=======
      __privateSet(this, _gcTimeout, setTimeout(() => {
>>>>>>> parent of 82e7c980 (trying to back back before dimentios)
        this.optionalRemove();
      }, this.gcTime));
    }
  }
  updateGcTime(newGcTime) {
    this.gcTime = Math.max(
      this.gcTime || 0,
      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)
    );
  }
  clearGcTimeout() {
    if (__privateGet(this, _gcTimeout)) {
<<<<<<< HEAD
      timeoutManager.clearTimeout(__privateGet(this, _gcTimeout));
=======
      clearTimeout(__privateGet(this, _gcTimeout));
>>>>>>> parent of 82e7c980 (trying to back back before dimentios)
      __privateSet(this, _gcTimeout, void 0);
    }
  }
};
_gcTimeout = new WeakMap();
export {
  Removable
};
//# sourceMappingURL=removable.js.map