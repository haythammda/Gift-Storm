import { Feature } from '../motion/features/Feature.mjs';
import { hover } from 'motion-dom';
import { extractEventInfo } from '../events/event-info.mjs';
import { frame } from '../frameloop/frame.mjs';

<<<<<<< HEAD
function handleHoverEvent(node, event, lifecycle) {
    const { props } = node;
    if (node.animationState && props.whileHover) {
        node.animationState.setActive("whileHover", lifecycle === "Start");
    }
    const eventName = ("onHover" + lifecycle);
    const callback = props[eventName];
=======
function handleHoverEvent(node, event, isActive) {
    const { props } = node;
    if (node.animationState && props.whileHover) {
        node.animationState.setActive("whileHover", isActive);
    }
    const callback = props[isActive ? "onHoverStart" : "onHoverEnd"];
>>>>>>> parent of 82e7c980 (trying to back back before dimentios)
    if (callback) {
        frame.postRender(() => callback(event, extractEventInfo(event)));
    }
}
class HoverGesture extends Feature {
    mount() {
<<<<<<< HEAD
        const { current } = this.node;
        if (!current)
            return;
        this.unmount = hover(current, (startEvent) => {
            handleHoverEvent(this.node, startEvent, "Start");
            return (endEvent) => handleHoverEvent(this.node, endEvent, "End");
        });
=======
        const { current, props } = this.node;
        if (!current)
            return;
        this.unmount = hover(current, (startEvent) => {
            handleHoverEvent(this.node, startEvent, true);
            return (endEvent) => handleHoverEvent(this.node, endEvent, false);
        }, { passive: !props.onHoverStart && !props.onHoverEnd });
>>>>>>> parent of 82e7c980 (trying to back back before dimentios)
    }
    unmount() { }
}

export { HoverGesture };
